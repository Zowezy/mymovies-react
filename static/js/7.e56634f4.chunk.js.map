{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","pages/Search/MultiSelect.jsx","pages/Search/SearchSingle.jsx","pages/Search/useSearchItems.jsx"],"names":["_slicedToArray","arr","i","Array","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","MultiSelect","React","memo","items","getFilter","sections","addSection","removeSection","useState","visible","setVisible","selectRef","useRef","handleOutsideClick","event","path","composedPath","target","includes","current","checkItem","id","isHave","map","item","useEffect","console","log","document","body","addEventListener","removeEventListener","className","ref","onClick","name","type","SearchSingle","useParams","page","setPage","dispatch","useDispatch","data","useSelector","state","category","catItems","activeItems","films","pages","isFetching","addCategory","useCallback","cat","setActiveCategoryMovie","setActiveCategoryTv","removeCategory","removeActiveCategoryMovie","removeActiveCategoryTv","initializeMovieFilter","initializeTvFilter","getItems","nextPage","getMovie","getTv","useSearchItems","handleAddCategory","handleRemoveCategory","getFilters","BigItem","Pagination","onPageChanged","pg"],"mappings":"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","file":"static/js/7.e56634f4.chunk.js","sourcesContent":["import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useState, useEffect, useRef } from 'react'\r\nimport { BsArrowDownShort } from 'react-icons/bs';\r\n\r\nconst MultiSelect = React.memo(({items,getFilter,sections,addSection,removeSection})=> {\r\n\r\n    const [visible,setVisible] = useState(false);\r\n    const toggleVisible = () => {\r\n        setVisible(!visible);\r\n    }\r\n    const selectRef = useRef();\r\n    const handleOutsideClick = (event) => {\r\n        const path = event.path || (event.composedPath && event.composedPath()) || event.composedPath(event.target); // данная строкча позволяет в Firefox также использолвать путь. Но для firefox мы дополнительн указываем что path - это это путь до клика\r\n          if (!path.includes(selectRef.current)) { // path это путь состоящий из массива, где указан весь путь DOM элементов до места клика мыши. Includes - это метод в JS, который ищет в массиве что-то конкретное\r\n              setVisible(false);\r\n          }\r\n      }\r\n\r\n    const checkItem = (id) => {\r\n        let isHave = false;\r\n        sections.map((item)=>{\r\n            if (item === id) {\r\n                isHave = true;\r\n            }\r\n            return null\r\n        })\r\n        return isHave;\r\n    }\r\n\r\n    useEffect(()=>{\r\n        items && items.length === 0 && getFilter();\r\n        console.log(items);\r\n        document.body.addEventListener(\"click\",handleOutsideClick);\r\n        return () => {\r\n            document.body.removeEventListener(\"click\",handleOutsideClick);\r\n        }\r\n    },[items,getFilter])\r\n\r\n\r\n    return (\r\n        <div className=\"select col-lg-12\" ref={selectRef}>\r\n            <div onClick={toggleVisible} className=\"label d-flex justify-content-between align-items-center\">\r\n                <b>{ sections.length !== 0 ? `Выбрано категорий (${sections.length})` : 'Выберите категории'  }</b>\r\n                <i className={visible ? 'active' : null} ><BsArrowDownShort className /></i>\r\n            </div>\r\n            { visible &&\r\n            <div className=\"sort\">\r\n                {items && items.map((item)=>{\r\n                    if (item.name) {\r\n                        return (\r\n                        <div\r\n                            key={item.id} \r\n                            className={checkItem(item.id) ? 'item active' : 'item'}\r\n                            onClick={checkItem(item.id) ? () => removeSection(item.id,item.type) : () => addSection(item.id,item.type) }\r\n                            ><b>{item.name}</b>\r\n                        </div>\r\n                        )\r\n                    }\r\n                    return null\r\n                })}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default MultiSelect;\r\n","import React, {useCallback, useEffect, useState} from 'react'\r\nimport { useParams } from 'react-router';\r\nimport { useSearchItems } from './useSearchItems';\r\nimport Pagination from './../../components/Pagination';\r\nimport BigItem from './../../components/BigItem';\r\nimport MultiSelect from './MultiSelect';\r\nimport {Preloader} from './../../components/loader/index';\r\n\r\n\r\nfunction SearchSingle() {\r\n\r\n    const {type} = useParams();\r\n\r\n    const [page,setPage] = useState(1);\r\n\r\n    const {data,addCategory,removeCategory,getFilter,getItems} = useSearchItems(type);\r\n\r\n\r\n    const handleAddCategory = useCallback(\r\n        (cat) => {\r\n            addCategory(cat)\r\n            setPage(1);\r\n        },\r\n        [addCategory],\r\n    )\r\n\r\n    const handleRemoveCategory = useCallback(\r\n        (cat) => {\r\n            removeCategory(cat)\r\n            setPage(1);\r\n        },\r\n        [removeCategory],\r\n    )\r\n\r\n    const getFilters = useCallback(\r\n        (type) => {\r\n            getFilter(type)\r\n        },\r\n        [getFilter],\r\n    )\r\n\r\n    useEffect(()=>{\r\n        getItems(data.catItems,page)\r\n    },[data.catItems,page,getItems])\r\n\r\n\r\n    return (\r\n        <>\r\n        <div className=\"catalog mt-5\">\r\n            <div className=\"container\">\r\n                <div className=\"row text-center justify-content-center\">\r\n                    <h1>{ type === 'movie' ? 'Фильмы' : 'Сериалы' }</h1>\r\n                    <div className=\"filter col-lg-10 d-lg-flex\">\r\n                    <MultiSelect\r\n                    sections={data.catItems}  \r\n                    addSection={handleAddCategory} \r\n                    removeSection={handleRemoveCategory} \r\n                    getFilter={getFilters} \r\n                    {...data.items}  />\r\n                    </div>\r\n                    <div className=\"list-item col-lg-12\">\r\n                        <div className=\"row\">\r\n\r\n                            { data.isFetching === false ? data.films.map((item)=>{ return (<BigItem key={item.id} type={type} {...item} />) }) : <Preloader /> }\r\n                        </div>\r\n                    </div>\r\n                    <Pagination page={page} pages={data.pages} onPageChanged={(pg) => setPage(pg)} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SearchSingle\r\n","import { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { removeActiveCategoryMovie, setActiveCategoryMovie, initializeMovieFilter, getMovie } from '../../redux/reducers/movieReducer';\r\nimport { removeActiveCategoryTv, setActiveCategoryTv, initializeTvFilter, getTv } from '../../redux/reducers/tvReducer';\r\n\r\nexport function useSearchItems(type) {\r\n\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const data = useSelector(state=>({\r\n        items:state[type].category,\r\n        catItems:state[type].category.activeItems,\r\n        films:state[type].items,\r\n        page:state[type].page,\r\n        pages:state[type].pages,\r\n        isFetching:state[type].isFetching\r\n    }));\r\n\r\n    const addCategory = useCallback(\r\n        (cat) => {\r\n        type === 'movie'\r\n        ? dispatch(setActiveCategoryMovie(cat))\r\n        : dispatch(setActiveCategoryTv(cat))\r\n        },\r\n        [dispatch,type],\r\n    )\r\n\r\n    const removeCategory = useCallback(\r\n        (cat) => {\r\n        type === 'movie'\r\n        ? dispatch(removeActiveCategoryMovie(cat))\r\n        : dispatch(removeActiveCategoryTv(cat))\r\n        },\r\n        [dispatch,type],\r\n    )\r\n\r\n    const getFilter = useCallback(\r\n        () => {\r\n            type === 'movie'\r\n            ? dispatch(initializeMovieFilter(type))\r\n            : dispatch(initializeTvFilter(type))\r\n        },\r\n        [dispatch,type],\r\n    )\r\n\r\n    const getItems = useCallback(\r\n        (catItems,nextPage) => {\r\n        type === 'movie'\r\n        ? dispatch(getMovie(catItems,nextPage))\r\n        : dispatch(getTv(catItems,nextPage))\r\n        },\r\n        [dispatch,type],\r\n    )\r\n\r\n    // const addCategory = (cat) => {\r\n    //     type === 'movie'\r\n    //     ? dispatch(setActiveCategoryMovie(cat))\r\n    //     : dispatch(setActiveCategoryTv(cat))\r\n    // }\r\n\r\n    // const removeCategory = (cat) => {\r\n    //     type === 'movie'\r\n    //     ? dispatch(removeActiveCategoryMovie(cat))\r\n    //     : dispatch(removeActiveCategoryTv(cat))\r\n    // }\r\n\r\n    // const getFilter = () => {\r\n    //     console.log(type);\r\n    //     type === 'movie'\r\n    //     ? dispatch(initializeMovieFilter(type))\r\n    //     : dispatch(initializeTvFilter(type))\r\n    // }\r\n\r\n    // const getItems = (catItems,nextPage) => {\r\n    //     type === 'movie'\r\n    //     ? dispatch(getMovie(catItems,nextPage))\r\n    //     : dispatch(getTv(catItems,nextPage))\r\n    // }\r\n\r\n    return {data,addCategory,removeCategory,getFilter,getItems}\r\n\r\n\r\n}"],"sourceRoot":""}